<div class="page-container-narrow">
  <div class="page-header">
    <h1>Your Addresses</h1>

    <% if @addresses.any? %>
    <div class="header-actions">
      <%= link_to "Add New Address", new_address_path, role: "button" %>
    </div>
      <% end %>
  </div>

  <% if @addresses.any? %>
    <div class="card-list">
      <% @addresses.each do |address| %>
        <article class="address-card">
          <div class="address-header">
            <h3>
              <%= address.first_name %> <%= address.last_name %>
            </h3>
            <% if current_identity.primary_address == address %>
              <span class="primary-badge">
                ğŸ  Primary
              </span>
            <% end %>
          </div>

          <div class="address-details">
            <p>
              <%= address.line_1 %><br>
              <% if address.line_2.present? %>
                <%= address.line_2 %><br>
              <% end %>
              <%= address.city %>, <%= address.state %> <%= address.postal_code %><br>
              <%= address.country %>
            </p>
          </div>

          <div class="address-actions">
            <%= button_to "Edit", edit_address_path(address), method: :get, class: "secondary" %>
            <% unless current_identity.primary_address == address %>
              <%= button_to "Make Primary", address_path(address, make_primary: true), method: :patch %>
            <% end %>
            <%= button_to "Delete", address, method: :delete,
                        data: { confirm: "Are you sure you want to delete this address?" },
                        class: "secondary danger" %>
          </div>
        </article>
      <% end %>
    </div>
  <% else %>
    <div class="empty-state">
      <div class="empty-icon">ğŸ“¬</div>
      <h3>No addresses yet</h3>
      <p>Add your first mailing address to get started</p>
      <%= link_to "Add Your First Address", new_address_path, role: "button" %>
    </div>
  <% end %>
</div>
